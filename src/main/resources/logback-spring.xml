<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <include resource="org/springframework/boot/logging/logback/base.xml"/>

<!--    <springProfile name="dev">-->

<!--        <appender name="RollingFile" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
<!--            <file>/logs/log.log</file>-->
<!--            <encoder>-->
<!--                <pattern>%d{dd-MM-yyyy} [%thread] %-5level %logger{36}.%M - %msg%n</pattern>-->
<!--            </encoder>-->
<!--            <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">-->
<!--                <fileNamePattern>log-%d{dd-MM-yyyy}.%i.log</fileNamePattern>-->
<!--                <maxFileSize>1MB</maxFileSize>-->
<!--                <maxHistory>1</maxHistory>-->
<!--            </rollingPolicy>-->
<!--        </appender>-->

<!--        <root level="info">-->
<!--            <appender-ref ref="RollingFile"/>-->
<!--        </root>-->

<!--    </springProfile>-->
    <springProfile name="dev">
        <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
            <encoder>
                <pattern>%green(%d{dd-MM-yyyy HH:mm:ss}) %magenta([%thread]) %highlight(%-5level) %logger{36}.%M -%msg%n</pattern>
            </encoder>
        </appender>
            <root level="info">
                <appender-ref ref="STDOUT"/>
            </root>
    </springProfile>


    <springProfile name="prod">

        <appender name="loggly" class="ch.qos.logback.ext.loggly.LogglyAppender">
            <endpointUrl>https://logs-01.loggly.com/inputs/${logglyToken}/tag/logback</endpointUrl>
            <pattern>%d{"ISO8601", UTC} %p %t %c %M - %m%n</pattern>
        </appender>

        <appender name="logglyAsync" class="ch.qos.logback.classic.AsyncAppender">
            <appender-ref ref="loggly" />
        </appender>

        <root level="info">
            <appender-ref ref="LOG"/>
        </root>
    </springProfile>



<!--    <appender name="OUTPUT-TO-FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">-->
<!--        <file>/</file>-->
<!--        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">-->
<!--            <pattern>%green(%d{dd-MM-yyyy HH:mm:ss}) %magenta([%thread]) %highlight(%-5level) %logger{36}.%M -%msg%n</pattern>-->
<!--        </encoder>-->
<!--        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">-->
<!--            <fileNamePattern>classpath:/log_%d{dd-MM-yyyy}.log</fileNamePattern>-->
<!--            <maxHistory>10</maxHistory>-->
<!--        </rollingPolicy>-->
<!--    </appender>-->
<!--    <root level="info">-->
<!--        <appender-ref ref="STDOUT"/>-->
<!--    </root>-->
</configuration>